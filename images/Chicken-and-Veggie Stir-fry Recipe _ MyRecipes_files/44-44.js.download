(window.webpackJsonp=window.webpackJsonp||[]).push([[44],{147:function(e,t,a){"use strict";a.r(t),a.d(t,"uploadFeedback",(function(){return k})),a.d(t,"submitToHelpful",(function(){return y}));var n=a(0),r=a.n(n),o=a(1),i=a.n(o),s=a(3),d=a.n(s),c=a(9),l=a(2),u=a(447),f=a(446),p=a(503),b=a(11),h=a(487),v=a(455);a(478);var m=a(526);function g(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function k(e,t){return new Promise((function(a,n){r.a.ajax({url:e,type:"POST",data:t,success:function(e){d()(l.A).broadcast(e,t),a(e)},error:function(e){n(e)}})}))}function y(e,t){return new Promise((function(a,n){r.a.ajax({url:e,type:"POST",data:t,success:function(e){a(e)},error:function(e){n(e)}})}))}function w(e,t){switch(t){case 1:i.a.set(e,"userDecisionArea","1 star: 'couldn't eat it'");break;case 2:i.a.set(e,"userDecisionArea","2 star: 'didn't like it'");break;case 3:i.a.set(e,"userDecisionArea","3 star: 'it was ok'");break;case 4:i.a.set(e,"userDecisionArea","4 star: 'liked it'");break;case 5:i.a.set(e,"userDecisionArea","5 star: 'loved it'");break;default:i.a.set(e,"userDecisionArea","body")}return e}function C(){var e=r()("body").data("caas-sitename");return JSON.parse(window.localStorage.getItem("".concat(e,"-recipeReviewFeedback"))).sort}function _(e){var t,a=r()("body").data("caas-sitename"),n="".concat(a,"-recipeReviewFeedback");t=e?e.click:null!==window.localStorage.getItem(n)?window.localStorage.getItem(n):r()(".feedback__sortOptions").data("default-sort");var o=JSON.parse(window.localStorage.getItem(n));return(null===o||o&&e)&&window.localStorage.setItem(n,JSON.stringify({sort:t})),JSON.parse(window.localStorage.getItem(n))}var $=function(){function e(t){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$context=t,this.$bodyContainer=t.find(".feedback__bodyContainer"),this.$options=t.find(".feedback__sortOption"),this.$trigger=t.find(".feedback__sortTrigger"),this.$myReview=t.find(".feedback__reviewContainer--myReview"),this.$loadMoreButton=r()("#feedback-loadMoreOnPage"),this.totalShownOnPage=0,this.$loadNextPageButton=r()("#feedback-page2"),this.$loadMoreButtonContainer=t.find(".feedback__loadMoreButtonContainer"),this.$form=r()(".feedback__modal form"),this.$alert=r()(".feedback__modal .alert-banner"),this.$feedbackButton=r()(".feedback__addContainerButton"),this.$addReviewButton=r()(".component.recipe-ratings .add-rating-reviews-link"),this.$feedbackModal=r()(".feedback__modal"),this.feedbackModal=new f.a(this.$feedbackModal,"feedback__modal"),this.$photoUploadComponent=r()(".feedback__photoUploadContainer"),this.$photoUploadHelp=r()(".feedback__photoUploadHelp"),this.$modalButtons=r()(".feedback__modalButtons button"),this.$uploadedImg=r()(".feedback__photoUploadImage"),this.$imageFilmstripCameraIcon=r()(".image-filmstrip .icon-add-photo"),this.$fileInput=r()(".feedback__photoUploadFile"),this.$contentWrapper=r()(".feedback__contentWrapper"),this.$publicURL="",this.$fileBinary=null,this.$cancelButton=r()(".feedback__modalCancel"),this.sort=_(),this.previousSort=C(),this.$selected=t.find(".feedback__sortSelected"),this.dataAttributes={},this.page=parseInt(t.data("page"),10)||1,this.pageOnPageLoad=this.page,this.segmentData=b.a.data(),this.isGridLayout=t.is("[data-grid-layout]"),this.$feedbackText=r()("#feedback-text"),this.sortOptions=t.data("sort-options");var n=Array.prototype.slice.call(t[0].attributes);if(n){var o=Object.keys(n);if(Array.prototype.forEach.call(o,(function(e){var r=n[e].nodeName;if("data-"===r.substring(0,5)){var o=i.a.camelCase(r.substring(5));a.dataAttributes[o]=t[0].getAttribute(r)}})),this.dataAttributes.contentGraphId){var s=Object(h.a)(this.dataAttributes.contentGraphId),d=s.provider,c=s.id;this.dataAttributes.provider=d,this.dataAttributes.providerId=c}}}var t,a,n;return t=e,(a=[{key:"setup",value:function(){var e=this;this.updateResults(),this.$loadMoreButton.click((function(){e.loadNextPageResults()}))}},{key:"loadNextPageResults",value:function(){this.page=this.page+1,this.updateResults()}},{key:"getContentActionTakenSegmentData",value:function(e){var t=this.segmentData,a={label:"rating & review",category:"ugc",contentSource:"0",contentType:t.contentType,sourceZone:"body",userDecisionArea:"body",contentAuthorName:t.contentAuthorName,contentChannel:t.contentChannel,contentCmsCategory:t.contentCmsCategory,contentCmsId:t.contentCmsId,contentGraphId:t.contentGraphId,contentModifiedDate:t.contentModifiedDate,contentPublishedDate:t.contentPublishedDate,contentShownOnPlatform:t.contentShownOnPlatform,contentTaxonomy:t.contentTaxonomy,meredithHashId:t.meredithHashId,MUID:t.MUID,title:t.title,url:t.url,visitTs:t.visitTs,requestId:t.requestId,previousTs:t.previousTs};return i.a.get(t,"timeIncBrand")?(i.a.set(a,"timeIncBrand",t.timeIncBrand),i.a.set(a,"timeIncApplication","front end")):(i.a.set(a,"sourceMeredithBrand",t.meredithBrand),i.a.set(a,"meredithBrand",t.meredithBrand),i.a.set(a,"meredithApplication","front end")),e&&(a=w(a,e.closest(".rating-star").data("rating"))),a}},{key:"handleFeedbackButtonPress",value:function(e){var t=this,a=e.closest(this.$feedbackButton);Object(v.b)().then((function(){t.$form.trigger("reset"),t.$feedbackModal.removeClass("submitted"),t.hideError(),t.feedbackModal.open(),window.feedbackModal=t.feedbackModal})).catch((function(){a.hasClass("embedded-auth-modal-trigger")&&sessionStorage.setItem("feedbackLogin",!0)})),Object(u.a)(e,this.$addReviewButton)?d()(l.v).broadcast(e):d()(l.v).broadcast()}},{key:"handleFeedbackButtonPressSegmentTracking",value:function(e){var t=this.getContentActionTakenSegmentData(e);window.analytics&&b.a.track("content action taken",t)}},{key:"handleFeedbackSubmitSegmentTracking",value:function(e,t){var a=this.getContentActionTakenSegmentData();i.a.set(a,"sourceZone","recipe-review-add-review"),i.a.set(a,"userDecisionArea","review submitted");var n=i.a.get(t,"ratingFiveStar")>0,r=i.a.get(t,"text");r&&n?i.a.set(a,"label","rating/review submitted"):r&&!n?i.a.set(a,"label","review submitted"):!r&&n&&i.a.set(a,"label","rating submitted"),a=w(a,parseInt(i.a.get(t,"ratingFiveStar"),10)),window.analytics&&b.a.track("content action taken",a)}},{key:"handleSortedResults",value:function(){this.$bodyContainer.html(""),this.updateResults()}},{key:"readUrl",value:function(){var e=this;if(this.$fileInput[0].files&&this.$fileInput[0].files[0]){var t=new FileReader;t.onload=function(t){i.a.set(e.$uploadedImg,"[0].style.backgroundImage","url(".concat(i.a.get(t,"target.result"),")")),e.$photoUploadHelp.addClass("loading"),e.$modalButtons.add(e.$fileInput).attr("disabled",!0),e.$fileBinary=i.a.get(e.$uploadedImg,"[0].style.backgroundImage"),d()(l.x).broadcast()},t.readAsDataURL(this.$fileInput[0].files[0])}}},{key:"handleReadMoreButtonPress",value:function(){r()(".feedback__reviewContainer:not([data-loaded]):not(.feedback__reviewContainer--myReview)").each((function(e,t){var a=r()(t);a.attr("data-loaded","");var n=a.find(".feedback__readMore"),o=a.find(".feedback__reviewBody"),i=o[0].getClientRects()[0],s=0;i&&(s=i.height/parseInt(o.css("line-height"),10)),s>6?(o.addClass("feedback__reviewBody--truncated"),n.click((function(){o.removeClass("feedback__reviewBody--truncated"),n.hide()}))):n.hide()}))}},{key:"showError",value:function(e){this.$alert.removeClass("hidden"),this.$alert.find(".alert-text").text(e)}},{key:"hideError",value:function(){this.$alert.addClass("hidden"),this.$alert.find(".alert-text").text(""),this.$photoUploadHelp.removeClass("loading"),this.$modalButtons.add(this.$fileInput).removeAttr("disabled")}},{key:"handlePhotoUpload",value:function(){var e=this.dataAttributes.postGenerateSignedUrlEndpoint,t=this.dataAttributes.postFeedbackPhotoUploadEndpoint,a=this.dataAttributes,n=a.provider,r=a.providerId;Object(p.a)(this.$fileInput,this.$fileBinary,e,t,n,r),encodeURIComponent()}},{key:"saveReview",value:function(e){var t,a,n=this,r=this.dataAttributes.variant,o=!1,s="";"difficulty"===r?(t=this.$form.find("input[name=difficulty]:checked").val())||(o=!0,s="Please select a difficulty."):(a=this.$form.find("input[name=ugc-rating]:checked").val())||(o=!0,s="Please select a rating."),o?(this.$feedbackModal.removeClass("loading"),this.showError(s)):Object(v.b)().then((function(o){var s=n.dataAttributes,d={idToken:o,brand:s.brand,provider:s.provider,providerId:s.providerId,text:e};n.$publicURL&&(d.urls=[n.$publicURL]),"difficulty"===r?d.ratingDifficulty=t:d.ratingFiveStar=a,0!==e.length&&"<p></p>"!==e||delete d.text,k(n.dataAttributes.postEndpoint,d).then((function(){n.$feedbackModal.addClass("submitted"),n.$feedbackModal.removeClass("loading"),n.hideError()})).catch((function(e){console.log(i.a.get(e,"description")||i.a.get(e,"responseJSON.Message","")),n.$feedbackModal.removeClass("loading"),n.showError("An unexpected error has occurred.")}))})).catch((function(e){console.log(e),n.$feedbackModal.removeClass("loading"),n.showError("An unexpected error has occurred.")}))}},{key:"saveComment",value:function(e){var t=this;Object(v.b)().then((function(a){var n=t.dataAttributes,r={idToken:a,brand:n.brand,provider:n.provider,providerId:n.providerId,comment:e,uuid:""};0!==e.length&&"<p></p>"!==e||delete r.text,k(t.dataAttributes.postEndpoint,r).then((function(){t.$feedbackModal.addClass("submitted"),t.$feedbackModal.removeClass("loading"),t.hideError()})).catch((function(e){console.log(i.a.get(e,"description")||i.a.get(e,"responseJSON.Message","")),t.$feedbackModal.removeClass("loading"),t.showError("An unexpected error has occurred.")}))})).catch((function(e){console.log(e),t.$feedbackModal.removeClass("loading"),t.showError("An unexpected error has occurred.")}))}},{key:"saveReply",value:function(e,t){var a=this,n=e.parents(".feedback__reviewContent");if(""===e.siblings(".feedback__userInputTextarea").val())return n.find(".alert-banner").removeClass("hidden").addClass("type-error"),void n.find(".alert-banner .alert-text").text("Please add a comment.");Object(v.b)().then((function(r){var o={idToken:r,brand:a.dataAttributes.brand,provider:e.parents(".feedback__reviewContainer").data("provider"),providerId:e.parents(".feedback__reviewContainer").data("provider-id"),comment:t,uuid:""};e.addClass("loading"),k(a.dataAttributes.postEndpoint,o).then((function(){e.siblings(".feedback__userInputTextarea").val(""),e.parents(".feedback__userInput").toggle(),n.find(".alert-banner").removeClass("hidden").addClass("type-success-created"),n.find(".alert-banner .alert-text").text("Thanks! Reply posted."),e.removeClass("loading")})).catch((function(t){console.log(i.a.get(t,"description")||i.a.get(t,"responseJSON.Message","")),n.find(".alert-banner").removeClass("hidden").addClass("type-error"),n.find(".alert-banner .alert-text").text("An unexpected error has occurred."),e.removeClass("loading")}))})).catch((function(t){console.log(t),n.find(".alert-banner").removeClass("hidden").addClass("type-error"),n.find(".alert-banner .alert-text").text("An unexpected error has occurred."),e.removeClass("loading")}))}},{key:"populateMyReview",value:function(e){var t=this;this.$myReview.length&&r()(document.body).hasClass("authenticated")&&(e&&(this.$myReview.addClass("loading"),this.handleSortedResults()),Object(v.b)().then((function(e){var a=t.dataAttributes,n=a.brand,o=a.provider,s=a.providerId,d=a.getUserEndpoint,c={idToken:e,brand:n,provider:o,providerId:s};r.a.ajax({url:d,type:"POST",data:c,success:function(e){e.html&&(t.$myReview.html(e.html),t.$myReview.removeClass("loading"),t.$context.find(".feedback__addContainer").addClass("hidden"),t.$myReview.find(".feedback__reviewEditLink").on("click",(function(a){a.preventDefault();var n=i.a.get(e,"data.reviewByUserAndContent.udf.rating_five_star"),o=i.a.get(e,"data.reviewByUserAndContent.udf.user_text");n&&r()("#star".concat(n)).click(),t.$feedbackText.val(function(e){var t="",a=i.a.split(e,"<p>");return i.a.forEach(a,(function(e){if(""!==i.a.trim(e)){var a=i.a.replace(e,"</p>","\r\n\r\n");i.a.includes(a,"<br />")&&(a=a.split("<br />").join("\r\n")),t+=a}})),t=i.a.trim(t)}(o)),setTimeout((function(){t.$feedbackModal.removeClass("submitted"),t.feedbackModal.open(),window.feedbackModal=t.feedbackModal}),0)})))},error:function(e){console.log(e)}})})).catch((function(e){console.log(e)})))}},{key:"events",value:function(){var e=this;document.body.addEventListener(l.e,(function(){sessionStorage.getItem("feedbackLogin")&&setTimeout((function(){e.feedbackModal.open(),window.feedbackModal=e.feedbackModal}),0)})),this.populateMyReview(),d()(l.x).subscribe((function(){e.handlePhotoUpload()})),d()(l.I).subscribe((function(){e.hideError()})),d()(l.H).subscribe((function(t){e.$publicURL=t,e.$photoUploadComponent.addClass("uploaded"),e.hideError()})),d()(l.z).subscribe((function(){return e.handleSortedResults()})),d()(l.v).subscribe((function(t){return e.handleFeedbackButtonPressSegmentTracking(t)})),d()(l.w).subscribe((function(){return e.handleFeedbackButtonPress(e.$feedbackButton)})),d()(l.A).subscribe((function(t,a){return e.handleFeedbackSubmitSegmentTracking(t,a)})),d()(l.A).subscribe((function(t,a){e.populateMyReview(t,a)})),d()(l.y).subscribe((function(){return e.handleReadMoreButtonPress()})),d()(l.o).subscribe((function(t,a){var n=a.closest(e.$options),o=r()(".feedback__reviewHelpful"),i=r()(".feedback__userInputButton");if(n.length&&(t.preventDefault(),e.sort=_({click:n.data("sort")}),e.sort!==n.data("sort"))){e.$options.removeClass("active"),n.addClass("active"),e.sort=n.data("sort");var s=n.text()?n.text().trim():"";e.$selected.text(s),e.$options.each((function(e,t){var a=r()(t).text()?r()(t).text().trim():"";r()(t).find(".feedback__sortOptionTitle").attr("aria-label","Sort by ".concat(a))})),n.find(".feedback__sortOptionTitle").attr("aria-label","".concat(s," (Selected)")),d()(l.z).broadcast()}if(Object(u.a)(a,o)){t.preventDefault();var c=a.parents(".feedback__reviewHelpful");if(r()("body").hasClass("authenticated")){var f=e.dataAttributes.brand,p=a.parent(".feedback__reviewHelpful").data("review-id"),b="review_".concat(f,"_").concat(p);c.hasClass("fired")||Object(v.b)().then((function(t){if(t){var a={idToken:t,brand:f,provider:"resound",providerId:b,type:"helpful"};y(e.dataAttributes.postReactionEndpoint,a).then((function(){c.addClass("fired");var e=c.find(".helpful__count").html();e=""!==e?parseInt(e,10)+1:1,c.find(".helpful__count").html(e)})).catch((function(e){console.log(e)}))}})).catch((function(e){console.log(e)}))}else c.hasClass("embedded-auth-modal-trigger")&&sessionStorage.setItem("feedbackHelpfulLogin",!0)}if(Object(u.a)(a,i)){t.preventDefault();var h=a.siblings(".feedback__userInputTextarea").val()||"";e.saveReply(a,h)}if(a.closest(".feedback__sortTrigger").length){t.preventDefault();var m=a.closest(e.$context).find(".feedback__sortOptions");m.hasClass("open")?(m.removeClass("open"),e.$trigger.attr("aria-expanded",!1)):(m.addClass("open"),e.$trigger.attr("aria-expanded",!0))}else if(a.closest(e.$feedbackButton).length||Object(u.a)(a,e.$addReviewButton))t.preventDefault(),e.handleFeedbackButtonPress(a);else if(Object(u.a)(a,e.$imageFilmstripCameraIcon)||a.closest(".ugc-upload-button").length)t.preventDefault(),e.handleFeedbackButtonPress(a);else if(a.closest(e.$cancelButton).length)e.feedbackModal.close();else if(a.closest(".feedback__reviewActions .reply__link").length){t.preventDefault();var g=a.parents(".feedback__reviewActions .reply__link");r()("body").hasClass("authenticated")?a.parents(".feedback__reviewActions").siblings(".feedback__userInput").toggle():g.hasClass("embedded-auth-modal-trigger")&&sessionStorage.setItem("feedbackReplyLogin",!0)}else a.parents(".alert-banner").addClass("hidden")?a.parents(".alert-banner").addClass("hidden"):r()(".feedback__sortOptions").length&&r()(".feedback__sortOptions").removeClass("open")})),d()(l.Sb).subscribe((function(t,a){if(a.closest(e.$form).length){t.preventDefault();var n=e.$form.find("textarea[name=feedback-text]").val()?e.$form.find("textarea[name=feedback-text]").val():"",r=e.dataAttributes.type;switch(e.$feedbackModal.addClass("loading"),r){case"reviews":e.saveReview(n);break;case"comments":e.saveComment(n)}}})),this.$fileInput.on("change",(function(){e.$fileInput[0].value&&e.readUrl()}));var t=window.location.href;-1!==t.indexOf("?ampRedirect=true")&&(-1!==t.indexOf("&addReview=true")&&this.$feedbackButton.trigger("click"),t=t.substring(0,t.indexOf("?")),window.history.replaceState(null,document.title,t))}},{key:"renderFeedbackPartial",value:function(e){1!==this.pageOnPageLoad||this.page<=1?this.$bodyContainer.html(e.html):this.$bodyContainer.append(e.html)}},{key:"updateSortUI",value:function(e){var t=this,a=r()('.feedback__sortOption[data-sort="'.concat(e,'"]'));a.length&&a.addClass("active");var n=i.a.findKey(this.sortOptions,(function(e){return-1!==e.indexOf(t.sort)}));this.$selected.text(n)}},{key:"updateResults",value:function(){var e=this;if(this.sort=C(),this.dataAttributes.sort=this.sort,this.updateSortUI(this.sort),parseInt(this.dataAttributes.total,10)>0){this.sort!==this.previousSort&&(this.dataAttributes.sort=this.sort,this.$bodyContainer.addClass("loading"),this.$context.data("page")||0===this.totalShownOnPage||(this.totalShownOnPage=0,this.page=1),this.previousSort=this.sort),this.dataAttributes.page=this.page;var t=i.a.omit(this.dataAttributes,["getEndpoint","postEndpoint","contentGraphId"]);t.onPage=this.pageOnPageLoad,this.$loadMoreButtonContainer.addClass("loading"),r.a.ajax({url:this.dataAttributes.getEndpoint,type:"GET",data:t,success:function(t){e.renderFeedbackPartial(t),e.$loadMoreButtonContainer.removeClass("loading"),e.totalShownOnPage+=parseInt(e.dataAttributes.itemsToRender,10),e.totalShownOnPage>=parseInt(e.dataAttributes.itemsPerPage,10)?(e.$loadNextPageButton.removeClass("hidden"),e.$loadMoreButton.addClass("hidden")):t.hasNext?(e.$loadMoreButton.removeClass("hidden"),e.$loadNextPageButton.addClass("hidden")):(e.$loadNextPageButton.addClass("hidden"),e.$loadMoreButton.addClass("hidden")),d()(l.y).broadcast(t),e.page>1&&function(){var e=Object(c.a)(),t=r()(".feedback__bodyContainer");window.karma=window.karma||{},window.karma.cmd=window.karma.cmd||[];var a=1;t.find(".feedback-review-ad:not(.ad-rendered)").each((function(t,n){var o,i=r()(n),s=m.a.generateTier(a,1);"mobile"===e?o=0===t?"div-gpt-mob-square-flex-tier".concat(s):"div-gpt-mob-square-fixed-tier".concat(s):"tablet"===e&&(o="div-gpt-square-fixed-tier".concat(s));var d=i[0];void 0!==o&&d&&window.karma.cmd.push((function(){window.karma.createSlot(o,d,!0,(function(){i.addClass("ad-rendered ".concat(e,"-ad"))})).setAttribute("tabindex","-1")})),a+=1}))}(),e.$contentWrapper.removeClass("loading"),e.$bodyContainer.removeClass("loading")},error:function(){e.$loadMoreButtonContainer.removeClass("loading"),e.$contentWrapper.removeClass("loading"),e.$bodyContainer.html("An unexpected error has occurred.")}})}else this.$contentWrapper.removeClass("loading")}},{key:"init",value:function(){this.setup(),this.events()}}])&&g(t.prototype,a),n&&g(t,n),e}();t.default=function(){new $(r()(".component.feedback")).init()}},455:function(e,t,a){"use strict";a.d(t,"b",(function(){return l})),a.d(t,"a",(function(){return u})),a.d(t,"c",(function(){return f}));var n=a(457),r=a(462);function o(e,t,a,n,r,o,i){try{var s=e[o](i),d=s.value}catch(e){return void a(e)}s.done?t(d):Promise.resolve(d).then(n,r)}function i(e){return function(){var t=this,a=arguments;return new Promise((function(n,r){var i=e.apply(t,a);function s(e){o(i,n,r,s,d,"next",e)}function d(e){o(i,n,r,s,d,"throw",e)}s(void 0)}))}}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var d=function(e){var t={};return[].forEach.call(e.attributes,(function(e){if(/^data-/.test(e.name)){var a=e.name.replace("data-","").replace(/-(.)/g,(function(e,t){return t.toUpperCase()}));t[a]=e.value}})),t},c=function(){return"object"===("undefined"==typeof auth0?"undefined":s(auth0))&&"function"==typeof auth0.webAuth?Promise.resolve():Object(n.a)("script","https://cdn.auth0.com/js/auth0/9.12.2/auth0.min.js")};function l(){var e=document.getElementById("auth0config"),t=d(e);try{return c().then((function(){var e=new auth0.WebAuth({domain:t.domain,clientID:t.clientId,redirectUri:"".concat(t.brandDomain,"/account/signupemailcallback"),responseType:"code token id_token"});return new Promise((function(a,n){e.checkSession({state:t.state,nonce:t.nonce,responseType:"code token id_token",scope:"openid email profile"},(function(e,o){e?(Object(r.c)("mdpaccount","",-1,t.brandDomain),document.body.classList.remove("authenticated"),n(e)):a(o.idToken)}))}))}))}catch(e){return Promise.reject(e)}}function u(){var e=document.getElementById("auth0config"),t=d(e);try{return c().then((function(){var e=new auth0.WebAuth({domain:t.domain,clientID:t.clientId,redirectUri:"".concat(t.brandDomain,"/account/signupemailcallback"),responseType:"code token id_token"});return new Promise((function(a,n){e.checkSession({state:t.state,nonce:t.nonce,responseType:"code token id_token",scope:"openid email profile"},(function(e,t){e&&n(e),a(t)}))}))}))}catch(e){return Promise.reject(e)}}function f(){return p.apply(this,arguments)}function p(){return(p=i(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.location.href="/account/forgot-password-reset";case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},457:function(e,t,a){"use strict";t.a=function(e,t){return new Promise((function(a,n){var r=document.createElement(e),o="src";r.onload=function(){return a()},r.onerror=function(){return n(new Error("Failed to load the resource"))},"link"===e&&(r.type="text/css",r.rel="stylesheet",o="href"),"script"===e&&(r.type="text/javascript"),r[o]=t,document.head.appendChild(r)}))}},462:function(e,t,a){"use strict";a.d(t,"a",(function(){return d})),a.d(t,"c",(function(){return c})),a.d(t,"b",(function(){return l}));var n=a(1),r=a.n(n);function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){s(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function d(e){var t=document.cookie.match("(^|;) ?".concat(e,"=([^;]*)(;|$)"));return t?t[2]:null}function c(e,t,a,n){var r=new Date,o=function(e){var t=document.createElement("a"),a=e;void 0===e&&(a=window.location.hostname),t.href=a;var n=t.hostname;return n.substr(0,n.lastIndexOf(".")).lastIndexOf(".")>-1&&(n=n.substr(n.substr(0,n.lastIndexOf(".")).lastIndexOf(".")+1)),n}(n);r.setTime(r.getTime()+24*a*60*60*1e3),document.cookie="".concat(e,"=").concat(t,";path=/;domain=").concat(o,";expires=").concat(r.toUTCString())}function l(e,t){var a=i(i({},e),{},{lastAuth:(new Date).getTime(),hashId:r.a.get(e,"idTokenPayload.http://meredith/HashId")});c("mdpaccount",JSON.stringify(a),365,t)}},478:function(e,t,a){"use strict";var n,r,o;r=[],void 0===(o="function"==typeof(n=function(){var e=/\s/,t=/<(\w*)>/g;return function(a,n,r){a=a||"";var o,i,s,d=0,c=0,l="",u="",f=!1;for("string"==typeof n?n=function(e){for(var a,n=[];null!==(a=t.exec(e));)n.push(a[1]);return 0!==n.length?n:null}(n):Array.isArray(n)||(n=null),o=0,i=a.length;o<i;o++)switch(s=a[o]){case"<":if(f)break;if(" "==a[o+1]){p(s);break}if(0==d){d=1,p(s);break}if(1==d){c++;break}p(s);break;case">":if(c){c--;break}if(f)break;if(1==d){f=d=0,n&&(u+=">",b());break}if(2==d){f=d=0,u="";break}if(3==d&&"-"==a[o-1]&&"-"==a[o-2]){f=d=0,u="";break}p(s);break;case'"':case"'":1==d&&(f==s?f=!1:f||(f=s)),p(s);break;case"!":if(1==d&&"<"==a[o-1]){d=2;break}p(s);break;case"-":if(2==d&&"-"==a[o-1]&&"!"==a[o-2]){d=3;break}p(s);break;case"E":case"e":if(2==d&&"doctype"==a.substr(o-6,7).toLowerCase()){d=1;break}p(s);break;default:p(s)}function p(e){0==d?l+=e:n&&1==d&&(u+=e)}function b(){var t,a,o,i="",s=!1;e:for(t=0,a=u.length;t<a;t++)switch(o=u[t].toLowerCase()){case"<":break;case">":break e;case"/":s=!0;break;default:if(o.match(e)){if(s)break e}else s=!0,i+=o}-1!==n.indexOf(i)?l+=u:r&&(l+=r),u=""}return l}})?n.apply(t,r):n)||(e.exports=o)},503:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var n=a(0),r=a.n(n),o=a(1),i=a.n(o),s=a(3),d=a.n(s),c=a(2),l=a(455);function u(e,t,a,n,o,s){var u=i.a.get(e,"[0].files[0].type"),f=i.a.get(e,"[0].files[0].name");Object(l.b)().then((function(e){(function(e,t){return new Promise((function(a,n){r.a.ajax({url:e,type:"POST",data:t,success:function(e){a(e)},error:function(e){n(e)}})}))})(a,{idToken:e,contentType:u,fileName:f,provider:o,providerId:s}).then((function(e){var a=i.a.get(e,"data.generateSignedURL.uploadURL"),o=i.a.get(e,"data.generateSignedURL.publicURL","");a&&function(e,t,a,n){return new Promise((function(o,i){var s={uploadUrl:t,imageData:a,contentType:n};r.a.ajax({url:e,type:"POST",data:s,success:function(e){o(e)},error:function(e){i(e)}})}))}(n,a,t,u).then((function(){d()(c.H).broadcast(o)})).catch((function(e){console.log(e),d()(c.I).broadcast(e)}))})).catch((function(e){console.log(e),d()(c.I).broadcast(e)}))})).catch((function(e){console.log(e),d()(c.I).broadcast(e)}))}},526:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n={generateTier:function(e,t){var a=t;return"number"!=typeof a&&(a=1),(e+a+2)%4+1}}}}]);
//# sourceMappingURL=44-44.js.map